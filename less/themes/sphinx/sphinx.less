// Customizations specific to the nCoda Sphinx theme.
//
// This is basically to compensate for the fact that Sphinx isn't very flexible in terms of which
// CSS classes it will output.

.toctree-wrapper ul {
    margin-top: 0;
    margin-bottom: 0.5em;
}

.toctree-wrapper li {
    list-style: none;
}

@sidebar-transition-duration: 0.25s;
.sidebar-navigation {
    .logo {
        display: flex;
        flex-flow: column;
        justify-content: center;
        align-content: center;
        align-items: center;
        a { max-width: 80%; }
        img {
            max-width: 100%;
            transition: filter @sidebar-transition-duration;
            &:hover {
                filter: drop-shadow(0 0 0.3em @global-primary);
            }
        }
    }
    .am-nav {
        a { transition: color @sidebar-transition-duration; }
        > li + li { margin: 0; }
        ul {
            .am-nav;
            margin: 0;
            > li + li { margin: 0; }
            > li > a, > li > a { transition: color @sidebar-transition-duration; }
            > li > a:focus, > li > a:hover {
                color: @global-primary;
                background: unset;
            }
        }
    }
    hr {
        border-top-color: @gray;
        margin-top: @base-margin-vertical;
    }
    .project_version { font-weight: 400; }
}

// this is the pilcrow on every section header
a.headerlink {
    font-size: 1em;
    margin-left: 1em;
    visibility: hidden;
}
h1:hover a.headerlink { visibility: visible; }
h2:hover a.headerlink { visibility: visible; }
h3:hover a.headerlink { visibility: visible; }
h4:hover a.headerlink { visibility: visible; }
h5:hover a.headerlink { visibility: visible; }
h6:hover a.headerlink { visibility: visible; }

// code highlighting (line numbers)
.linenos {
    padding-right: @table-cell-padding
}
.linenodiv pre {
    border: none;
    background-color: unset;
    color: inherit;
}

// code literals that link to other topics
a code.xref {
    color: @link-color;
    :hover {
        text-decoration: underline;
    }
}

// definitions for functions, classes, etc.
dt {  // the term itself
    font-weight: normal;
    code.descname {
        font-size: 1.5em;
    }
    em.property {
        font-size: smaller;
        font-style: normal;
    }
}
dd {  // the description block
    margin-top: 0.25em;
    margin-bottom: 2em;
    margin-left: 2.25em;
    .field-name {
        background-color: @gray-lighter;
        padding: 0.2em;
    }
    .field-body {
        padding-left: 0.75em;
    }
}


// admonitions
.admonition {
    background-color: @gray-lighter;
    font-size: 0.9em;
    margin: 1em 0 1em 0;
    padding: 0;
    .admonition-title {
        background-color: @global-primary;
        margin: 0;
        padding: 0.1em 0 0.1em 0.5em;
        color: @white;
        font-weight: bold;
    }
    p {
        margin: 0;
        padding: 1em;
    }
}
.admonition.attention .admonition-title { background-color: @global-info; }
.admonition.caution .admonition-title { background-color: @global-warning; }
.admonition.danger .admonition-title { background-color: @global-danger; }
.admonition.error .admonition-title { background-color: @global-info; }
.admonition.hint .admonition-title { background-color: @global-success; }
.admonition.important .admonition-title { background-color: @global-warning; }
.admonition.note .admonition-title { background-color: @global-info; }
.admonition.tip .admonition-title { background-color: @global-info; }
.admonition.warning .admonition-title { background-color: @global-warning; }


// footer
.@{ns}footer .logo {
    max-height: 1em;
}


// search results (generated in JavaScript by searchtools.js_t
#search-results {
    .search {
        a {
            display: inline;
            text-decoration: underline;
        }
        .context {
            margin-left: 4rem;
        }
    }
}
.highlighted {
    // NB: same as amazeUI <mark> element
    background: @base-mark-background;
    color: @base-mark-color;
}


// nCoda-in-Sphinx class on a <nav> that's an amazeUI ScrollSpyNav
.in-page-nav {
    top: 0;
    z-index: 100;
    background: @topbar-bg;
    width: 100%;
    padding: 0 10px;

    ul {
        margin: 0;
        padding: 0;
    }

    li {
        display: inline-block;
        list-style: none;
    }

    a {
        color: @topbar-link-color;
        padding: 10px 20px;
        display: inline-block;
        &.am-active {
            color: @topbar-link-active-color;
        }
    }
}
